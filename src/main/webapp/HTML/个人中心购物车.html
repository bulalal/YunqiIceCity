<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>个人中心购物车</title>
    <link
      rel="stylesheet"
      href="\src\main\webapp\CSS\个人中心购物车CSS\common.css"
    />
    <link
      rel="stylesheet"
      href="\src\main\webapp\CSS\个人中心购物车CSS\index.css"
    />
  </head>
  <body>
    <div class="background">
      <div class="header-flex">
        <div class="logo"></div>
        <div class="logo-text">云启冰城</div>
        <div class="brand-intro">品牌介绍</div>
        <div class="product-intro">产品介绍</div>
        <div class="personal-center">个人中心</div>
        <div class="heat-ranking">热度排行</div>
      </div>
      <div class="navigation-left">
        <div class="customer-order">
          <div class="left-logo1"></div>
          <div class="order-text"></div>
          <div class="right-logo1"></div>
        </div>
        <div class="stock-control">
          <div class="left-logo2"></div>
          <div class="stock-text"></div>
          <div class="right-logo2"></div>
        </div>
      </div>
      <div class="view">
        <div class="tea-line1">
          <div class="tea" id="tea1"></div>
          <div class="tea" id="tea2"></div>
          <div class="tea" id="tea3"></div>
        </div>
        <div class="tea-line2">
          <div class="tea"></div>
          <div class="tea"></div>
          <div class="tea"></div>
        </div>
      </div>
      <div class="jieSuan"></div>
    </div>

    <script>
      // document.addEventListener("DOMContentLoaded", (event) => {
      //   const apiUrl =
      //     "https://vast-suitably-ram.ngrok-free.app/YunqiIceCity/shopcart/selectAll";
      //   const headers = new Headers();
      //   headers.append("ngrok-skip-browser-warning", "abab");
      //   headers.append("Content-Type", "application/json");

      //   fetch(apiUrl, {
      //     method: "GET",
      //     headers: headers,
      //   })
      //     .then((response) => {
      //       if (!response.ok) {
      //         throw new Error("Network response was not ok");
      //       }
      //       return response.json();
      //     })
      //     .then((data) => {
      //       // 检查响应状态码和消息，确保请求成功
      //       if (data.code === 1 && data.msg === "success") {
      //         // 获取所有的tea类div元素
      //         const teaDivs = document.querySelectorAll(".tea");

      //         // 假设data.data是一个包含图片链接的数组
      //         const imageUrls = Array.isArray(data.data)
      //           ? data.data
      //           : [data.data];

      //         // 遍历返回的图片链接，并将它们设置为对应div的背景图片
      //         imageUrls.forEach((imageUrl, index) => {
      //           const teaDiv = teaDivs[index];
      //           if (teaDiv) {
      //             teaDiv.style.backgroundImage = `url(${imageUrl})`;
      //             teaDiv.style.backgroundSize = "cover"; // 确保背景图片覆盖整个div
      //           }
      //         });
      //       } else {
      //         console.error("API response is not successful:", data);
      //       }
      //     })
      //     .catch((error) => {
      //       console.error(
      //         "There was a problem with the fetch operation:",
      //         error
      //       );
      //     });
      // });

      document.addEventListener("DOMContentLoaded", (event) => {
        const apiUrl =
          "https://vast-suitably-ram.ngrok-free.app/YunqiIceCity/shopcart/selectAll";
        const headers = new Headers();
        headers.append("ngrok-skip-browser-warning", "abab");
        headers.append("Content-Type", "application/json");

        fetch(apiUrl, {
          method: "GET",
          headers: headers,
        })
          .then((response) => {
            if (!response.ok) {
              throw new Error("Network response was not ok");
            }
            return response.json();
          })
          .then((data) => {
            // 检查响应状态码和消息，确保请求成功
            if (data.code === 1 && data.msg === "success") {
              // 获取所有的tea类div元素
              const teaDivs = document.querySelectorAll(".tea");

              // 遍历返回的data数组，并将图片链接设置为对应div的背景图片
              data.data.forEach((item, index) => {
                const imageUrl = item.image; // 从当前对象中提取image字段
                const teaDiv = teaDivs[index];
                if (teaDiv) {
                  teaDiv.style.backgroundImage = `url(${imageUrl})`;
                  teaDiv.style.backgroundSize = "cover"; // 确保背景图片覆盖整个div
                }
              });
            } else {
              console.error("API response is not successful:", data);
            }
          })
          .catch((error) => {
            console.error(
              "There was a problem with the fetch operation:",
              error
            );
          });
      });
    </script>
  </body>
</html>
